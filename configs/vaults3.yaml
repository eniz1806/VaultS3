server:
  address: "0.0.0.0"
  port: 9000
  domain: ""  # set to enable virtual-hosted style URLs (e.g. "localhost", "s3.example.com")
  shutdown_timeout_secs: 30
  tls:
    enabled: false
    cert_file: ""
    key_file: ""

storage:
  data_dir: "./data"
  metadata_dir: "./metadata"

auth:
  admin_access_key: "vaults3-admin"
  admin_secret_key: "vaults3-secret-change-me"

encryption:
  enabled: false
  key: ""

compression:
  enabled: false

logging:
  enabled: false
  file_path: "./access.log"

lifecycle:
  scan_interval_secs: 3600

security:
  ip_allowlist: []     # global CIDR allow list, empty = allow all
  ip_blocklist: []     # global CIDR deny list
  audit_retention_days: 90
  sts_max_duration_secs: 43200  # max STS token duration (12 hours)

notifications:
  max_workers: 4       # webhook delivery goroutines
  queue_size: 256      # buffered event queue size
  timeout_secs: 10     # webhook HTTP timeout
  max_retries: 3       # retry attempts for failed webhooks
  kafka:
    enabled: false
    brokers: ["localhost:9092"]
    topic: "vaults3-events"
  nats:
    enabled: false
    url: "nats://localhost:4222"
    subject: "vaults3.events"
  redis:
    enabled: false
    addr: "localhost:6379"
    channel: "vaults3-events"
    list_key: ""        # set to use LPUSH queue mode instead of pub/sub

replication:
  enabled: false
  peers: []            # list of {name, url, access_key, secret_key}
  scan_interval_secs: 30
  max_retries: 5
  batch_size: 100

scanner:
  enabled: false
  webhook_url: "http://localhost:3310/scan"
  timeout_secs: 30
  quarantine_bucket: "vaults3-quarantine"
  fail_closed: false
  max_scan_size_bytes: 104857600  # 100MB
  workers: 2

tiering:
  enabled: false
  cold_data_dir: "./cold_data"
  migrate_after_days: 30
  scan_interval_secs: 3600

rate_limit:
  enabled: false
  requests_per_sec: 100   # per IP
  burst_size: 200
  per_key_rps: 50         # per access key
  per_key_burst: 100

backup:
  enabled: false
  targets: []              # list of {name, type, path}
  schedule_cron: "0 2 * * *"  # daily at 2am
  retention_days: 30
  incremental: false

oidc:
  enabled: false
  issuer_url: ""           # OIDC provider URL (e.g. "https://accounts.google.com")
  client_id: ""            # OAuth2 client ID
  allowed_domains: []      # restrict to email domains (empty = allow all)
  role_mapping: {}         # map OIDC groups to VaultS3 policies
  auto_create_users: true  # auto-create IAM user on first OIDC login
  jwks_cache_secs: 3600    # JWKS key cache duration

lambda:
  enabled: false
  max_response_size: 10485760  # 10MB max response from function
  timeout_secs: 30
  max_workers: 4
  queue_size: 256

memory:
  max_search_entries: 50000    # max objects in search index (LRU eviction)
  go_mem_limit_mb: 0           # Go runtime memory limit (0 = unlimited)
